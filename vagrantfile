Vagrant.configure(2) do |config|

  config.vm.define "web1" do |web1|
    web1.vm.box = "centos/7"
    web1.vm.hostname = "webserver1"
    web1.vm.network "private_network", ip: "192.168.50.10"
    web1.vm.provider "virtualbox" do |vb|
      vb.memory = "256"
      vb.cpus = "2"
    end
    web1.vm.provision :ansible do |ansible|
      ansible.limit = "all"
      ansible.playbook = "web.yml"
      ansible.groups = {
        "web" => [
          "web"
        ]
	}
    end
  end

  config.vm.define "web2" do |web2|
    web2.vm.box = "centos/7"
    web2.vm.hostname = "webserver2"
    web2.vm.network "private_network", ip: "192.168.50.11"
    web2.vm.provider "virtualbox" do |vb|
      vb.memory = "256"
      vb.cpus = "2"
    end
    web2.vm.provision :ansible do |ansible|
      ansible.limit = "all"
      ansible.playbook = "web.yml"
      ansible.groups = {
        "web" => [
          "web"
        ]
	}
    end
  end

  config.vm.define "lb" do |lb|
    lb.vm.box = "centos/7"
    lb.vm.hostname = "loadbalancer1"
    lb.vm.network "private_network", ip: "192.168.50.12"
    lb.vm.provider "virtualbox" do |vb|
      vb.memory = "256"
      vb.cpus = "2"
    end
    lb.vm.provision :ansible do |ansible|
      ansible.limit = "all"
      ansible.playbook = "lb.yml"
      ansible.groups = {
        "lb" => [
          "lb"
        ]
	}
    end

  end

end
